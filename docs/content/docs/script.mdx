---
title: Tracking script
description: How to install and configure the Rybbit tracking script
---

import { Callout } from 'fumadocs-ui/components/callout';

To start tracking user activity on your website, add the Rybbit tracking script to your site's HTML.

## Installation
The webpage should give you this script tag like this when you first add a website. Place it within the `<head>` section of your website. Include it on every page you wish to track.

```html
<script src="https://app.rybbit.io/api/script.js" async data-site-id="YOUR_SITE_ID"></script>
```
If you are self-hosting Rybbit `app.rybbit.io` will be domain of your Rybbit instance.

<Callout type="info">
  **Bypass Ad Blockers**: Some ad blockers may block analytics scripts regardless of privacy compliance. To improve tracking accuracy, you can proxy the tracking script through your own domain. See our [Proxy Guide](/docs/proxy-guide) for setup instructions for Next.js, Nginx, Caddy, and more.
</Callout>

## Configuration

### Site Settings Configuration

Most tracking options are configured through your site settings in the Rybbit dashboard. The script automatically fetches these settings when it loads:

- **Automatic Initial Pageview**: Track the first pageview when the script loads
- **SPA Navigation**: Automatically track navigation in single-page applications
- **URL Parameters**: Include or exclude query strings from tracked URLs
- **Outbound Links**: Track clicks to external websites
- **Error Tracking**: Capture JavaScript errors and unhandled promise rejections
- **Session Replay**: Record user interactions for debugging and UX analysis
- **Web Vitals**: Collect Core Web Vitals performance metrics

### Script Attributes

These are the attributes you can pass to the script tag.

| Attribute         | Type       | Default | Description                                                                                                                                                             |
| :---------------- | :--------- | :------ | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `data-skip-patterns` | `string` | `[]`   | A JSON string array of URL path patterns to ignore. Pageviews matching these patterns won't be tracked. Supports two types of wildcards: `*` (matches within a segment) and `**` (matches across segments). |
| `data-mask-patterns` | `string` | `[]`   | A JSON string array of URL path patterns to mask for privacy. Pageviews matching these patterns will be tracked, but the actual URL path will be replaced with the pattern itself in analytics data. Supports the same wildcards as `data-skip-patterns`. |
| `data-debounce`   | `string`   | `"500"`| The delay (in milliseconds) before tracking a pageview after URL changes via the History API (`pushState`, `replaceState`). Set to `0` to disable debouncing. |

### Session Replay Attributes

These attributes configure rrweb session replay behavior. They only apply when session replay is enabled in your site settings.

| Attribute         | Type       | Default | Description                                                                                                                                                             |
| :---------------- | :--------- | :------ | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `data-replay-mask-text-selectors` | `string` | `[]` | A JSON string array of CSS selectors for elements whose text content should be masked. Example: `'[".user-name", "#email"]'`. |
| `data-replay-block-class` | `string` | `"rr-block"` | CSS class name for elements to exclude entirely from recording. Elements with this class won't appear in replays. |
| `data-replay-block-selector` | `string` | `null` | CSS selector for elements to exclude from recording. Example: `".sensitive-content, #private-section"`. |
| `data-replay-ignore-class` | `string` | `"rr-ignore"` | CSS class name for elements whose input events should be ignored. The element appears but interactions aren't recorded. |
| `data-replay-ignore-selector` | `string` | `null` | CSS selector for elements whose input events should be ignored. Example: `"input[name='credit-card']"`. |
| `data-replay-mask-text-class` | `string` | `"rr-mask"` | CSS class name for elements whose text content should be masked (shown as asterisks). |
| `data-replay-mask-all-inputs` | `boolean` | `true` | When true, all input values are masked as asterisks for privacy. Set to `"false"` to disable. |
| `data-replay-mask-input-options` | `JSON object` | `{"password":true,"email":true}` | Specify which input types to mask. Example: `'{"password":true,"email":true,"tel":true}'`. |
| `data-replay-collect-fonts` | `boolean` | `true` | When true, website fonts are collected for accurate replay rendering. Set to `"false"` to reduce data size. |
| `data-replay-sampling` | `JSON object` | See below | Configure event sampling to reduce data volume. See sampling options below. |
| `data-replay-slim-dom-options` | `JSON object` | See below | Configure which DOM elements to exclude from recording. See slimDOM options below. |


### Pattern Matching Details

For `data-skip-patterns` and `data-mask-patterns`, two types of wildcards are supported:
- `*` - Matches any characters within a single path segment (doesn't match across `/`)
- `**` - Matches any characters across multiple path segments (includes `/`)

Examples:
- `/admin/*` matches `/admin/dashboard` but not `/admin/users/list`
- `/admin/**` matches both `/admin/dashboard` and `/admin/users/list`
- `/blog/*/comments` matches `/blog/post-123/comments` but not `/blog/category/post/comments`

Example usage:
```html
data-skip-patterns='["/admin/**", "/blog/drafts/*", "/preview/**"]'
data-mask-patterns='["/users/*/settings", "/accounts/**", "/orders/*/details"]'
```

**Example with debugging overrides:**

```html
<script
  src="https://app.rybbit.io/api/script.js"
  defer
  data-site-id="456"
  data-skip-patterns='["/admin/**", "/preview/*"]'
  data-mask-patterns='["/users/*/profile", "/orders/**"]'
  data-replay-mask-text-selectors='[".user-name", "#email"]'
  data-debounce="300"
></script>
```

## Session Replay Configuration

When session replay is enabled in your site settings, you can fine-tune the recording behavior using the attributes above. This section covers the more complex configuration options.

### Privacy Controls

Protect sensitive user information using these options:

| Option | Best For |
|--------|----------|
| `data-replay-block-*` | Completely hide elements (e.g., admin panels, modals with PII) |
| `data-replay-ignore-*` | Show elements but don't record interactions (e.g., form fields) |
| `data-replay-mask-*` | Show element structure but hide text content (e.g., names, emails) |

**Example - Comprehensive privacy setup:**
```html
<script
  src="https://app.rybbit.io/api/script.js"
  defer
  data-site-id="123"
  data-replay-block-selector=".admin-panel, #payment-modal"
  data-replay-ignore-selector="input[name='ssn'], input[name='credit-card']"
  data-replay-mask-text-selectors='[".user-name", "#email", "[data-pii]"]'
  data-replay-mask-input-options='{"password":true,"email":true,"tel":true}'
></script>
```

### Sampling Configuration

The `data-replay-sampling` attribute controls how frequently events are recorded. Lower sampling rates reduce data volume but may miss some interactions.

**Default sampling configuration:**
```json
{
  "mousemove": false,
  "mouseInteraction": {
    "MouseUp": false,
    "MouseDown": false,
    "Click": true,
    "ContextMenu": false,
    "DblClick": true,
    "Focus": true,
    "Blur": true,
    "TouchStart": false,
    "TouchEnd": false
  },
  "scroll": 500,
  "input": "last",
  "media": 800
}
```

**Sampling options:**
- `mousemove`: `false` to disable, or number (ms) for sampling interval
- `scroll`: Sampling interval in milliseconds (e.g., `500` = sample every 500ms)
- `input`: `"last"` to only record final value, or `"all"` to record every keystroke
- `media`: Sampling interval for media events in milliseconds

**Example - Enable mouse tracking for UX analysis:**
```html
data-replay-sampling='{"mousemove":100,"scroll":150}'
```

### SlimDOM Options

The `data-replay-slim-dom-options` attribute controls which DOM elements are excluded from recording to reduce data size.

**Default slimDOM configuration:**
```json
{
  "script": false,
  "comment": true,
  "headFavicon": true,
  "headWhitespace": true,
  "headMetaDescKeywords": true,
  "headMetaSocial": true,
  "headMetaRobots": true,
  "headMetaHttpEquiv": true,
  "headMetaAuthorship": true,
  "headMetaVerification": true
}
```

Set to `true` to enable all slimDOM options, or `false` to disable all:
```html
data-replay-slim-dom-options="true"
```

### Complete Example

```html
<script
  src="https://app.rybbit.io/api/script.js"
  defer
  data-site-id="456"
  data-skip-patterns='["/admin/**", "/preview/*"]'
  data-mask-patterns='["/users/*/profile", "/orders/**"]'
  data-debounce="300"
  data-replay-block-selector=".sensitive-content"
  data-replay-mask-text-selectors='[".user-name", "#email"]'
  data-replay-mask-all-inputs="true"
  data-replay-collect-fonts="false"
  data-replay-sampling='{"mousemove":false,"scroll":500}'
></script>
```
