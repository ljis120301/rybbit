---
title: Track events
description: How to track custom events with Rybbit
---


The script exposes a global object `window.rybbit` with functions for manual tracking of events, as well as the ability to track events using data attributes on HTML elements.

## Using Data Attributes

You can track custom events by adding data attributes to any HTML element:

```html
<!-- Basic event tracking -->
<button data-rybbit-event="signup_clicked">Sign Up</button>

<!-- Event with custom properties -->
<button 
  data-rybbit-event="purchase_click" 
  data-rybbit-prop-product="premium" 
  data-rybbit-prop-price="49.99"
>
  Buy Now
</button>
```

This approach requires no JavaScript and works on any clickable element.

## Available Functions

### `window.rybbit.event(eventName, properties)`

Tracks a custom event with optional properties.

*   `eventName` (String): The name of the custom event (max 255 characters).
*   `properties` (Object, Optional): An object containing custom data (max 2KB characters). Only strings numbers are supported as values.

```javascript
// Track a simple custom event
window.rybbit.event("Signup Button Clicked");

// Track a custom event with properties
window.rybbit.event("Item Added To Cart", {
  itemId: "PROD123",
  price: 49.99,
  category: "Clothing"
});
```

### `window.rybbit.pageview()`

Tracks a pageview. Useful when `data-track-spa` is set to `"false"` or when you need to manually trigger a pageview.

```javascript
// Track a pageview
window.rybbit.pageview();
```

### `window.rybbit.identify(userId, traits?)`

Sets a custom user ID for tracking logged-in users across devices and sessions, with optional user traits (metadata).

*   `userId` (String): The unique identifier for the user. This will be stored in localStorage and persist across browser sessions. **Note: Custom user IDs are stored exactly as provided without any hashing or modification.**
*   `traits` (Object, Optional): An object containing user metadata like email, name, or any custom fields. This data is stored in Rybbit and can be used to identify users in the dashboard.

```javascript
// Identify a user when they log in (without traits)
window.rybbit.identify("user_12345");

// Identify a user with traits (recommended)
window.rybbit.identify("user_12345", {
  email: "user@example.com",
  name: "John Doe",
  plan: "premium",
  company: "Acme Inc"
});

// All subsequent events and pageviews will be associated with this user ID
```

### `window.rybbit.setTraits(traits)`

Updates the traits for the currently identified user without re-identifying them. Useful for updating user properties after initial identification.

*   `traits` (Object): An object containing user metadata. New traits are merged with existing traits.

```javascript
// Update user traits after they upgrade their plan
window.rybbit.setTraits({
  plan: "enterprise",
  upgraded_at: "2024-01-15"
});
```

**Note:** You must call `identify()` before using `setTraits()`. If no user is identified, this will log a warning.

### `window.rybbit.clearUserId()`

Clears the stored user ID. Useful when a user logs out.

```javascript
// Clear user identification when user logs out
window.rybbit.clearUserId();
```

### `window.rybbit.getUserId()`

Returns the currently set user ID, or `null` if none is set.

```javascript
// Check if a user is identified
const currentUserId = window.rybbit.getUserId();
if (currentUserId) {
  console.log('Current user:', currentUserId);
} else {
  console.log('No user identified');
}
```

## User Identification Example

Here's a typical workflow for user identification:

```javascript
// When user logs in
function handleLogin(userData) {
  // Set user identification with traits
  window.rybbit.identify(userData.id, {
    email: userData.email,
    name: userData.name,
    plan: userData.plan
  });

  // Track login event
  window.rybbit.event("User Login", {
    method: "email"
  });
}

// When user upgrades their plan
function handlePlanUpgrade(newPlan) {
  // Update traits without re-identifying
  window.rybbit.setTraits({
    plan: newPlan,
    upgraded_at: new Date().toISOString()
  });

  // Track upgrade event
  window.rybbit.event("Plan Upgraded", {
    new_plan: newPlan
  });
}

// When user logs out
function handleLogout() {
  // Track logout event
  window.rybbit.event("User Logout");

  // Clear user identification
  window.rybbit.clearUserId();
}

// Check identification status
function checkUserStatus() {
  const userId = window.rybbit.getUserId();
  if (userId) {
    console.log("User is identified:", userId);
  } else {
    console.log("Anonymous user");
  }
}
```

## TypeScript Support

Put this as `rybbit.d.ts` anywhere in your project to avoid having to do `(window as any).rybbit.event()` everywhere.

```typescript
interface Rybbit {
    /**
     * Tracks a page view
     */
    pageview: () => void;

    /**
     * Tracks a custom event
     * @param name Name of the event
     * @param properties Optional properties for the event
     */
    event: (name: string, properties?: Record<string, any>) => void;

    /**
     * Sets a custom user ID for tracking logged-in users
     * @param userId The user ID to set (will be stored in localStorage)
     * @param traits Optional user metadata (email, name, custom fields)
     */
    identify: (userId: string, traits?: Record<string, unknown>) => void;

    /**
     * Updates traits for the currently identified user
     * @param traits User metadata to merge with existing traits
     */
    setTraits: (traits: Record<string, unknown>) => void;

    /**
     * Clears the stored user ID
     */
    clearUserId: () => void;

    /**
     * Gets the currently set user ID
     * @returns The current user ID or null if not set
     */
    getUserId: () => string | null;

    /**
     * Manually tracks outbound link clicks
     * @param url The URL of the outbound link
     * @param text Optional text content of the link
     * @param target Optional target attribute of the link
     */
    trackOutbound: (url: string, text?: string, target?: string) => void;
}

declare global {
    interface Window {
        rybbit: Rybbit;
    }
}

export {};
```

## Server-Side Tracking

For tracking events from server-side applications, mobile apps, or any platform outside the browser, you can use the HTTP API. This is useful for:

- Server-side event tracking (Node.js, Python, Go, etc.)
- Mobile app analytics (iOS, Android, Flutter)
- Backend integrations and webhooks
- Scenarios where the JavaScript snippet can't be used

See the [API documentation](/docs/api/sending-events) for detailed examples in multiple languages including authentication, parameters, and rate limiting information.

---

**Related Documentation:**
- [Behavior Analytics - Events Tab](/docs/behavior-analytics/events)
- [Behavior Analytics - Users Tab](/docs/behavior-analytics/users)
- [Behavior Analytics - Sessions Tab](/docs/behavior-analytics/sessions)
- [Product Analytics - Retention Guide](/docs/product-analytics/retention_guide)
- [Product Analytics - Funnels](/docs/product-analytics/funnels_guide)
- [API - Sending Events](/docs/api/sending-events)
- [Blog: Churn Rate vs Retention Rate](/blog/churn-rate-vs-retention-rate)
- [Web SDK Reference](/docs/sdks/web)