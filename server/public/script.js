"use strict";(()=>{var Pe=Object.defineProperty;var Ce=(t,e,s)=>e in t?Pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var g=(t,e,s)=>Ce(t,typeof e!="symbol"?e+"":e,s);function Ie(t){let e="__DOUBLE_ASTERISK_TOKEN__",s="__SINGLE_ASTERISK_TOKEN__",i=t.replace(/\*\*/g,e).replace(/\*/g,s).replace(/[.+?^${}()|[\]\\]/g,"\\$&");i=i.replace(new RegExp(`/${e}/`,"g"),"/(?:.+/)?"),i=i.replace(new RegExp(e,"g"),".*"),i=i.replace(/\//g,"\\/");let c=i.replace(new RegExp(s,"g"),"[^/]+");return new RegExp("^"+c+"$")}function O(t,e){for(let s of e)try{if(Ie(s).test(t))return s}catch(n){console.error(`Invalid pattern: ${s}`,n)}return null}function X(t,e){let s=null;return(...n)=>{s&&clearTimeout(s),s=setTimeout(()=>t(...n),e)}}function Z(t){try{let e=window.location.hostname,s=new URL(t).hostname;return s!==e&&s!==""}catch{return!1}}function m(t,e){if(!t)return e;try{let s=JSON.parse(t);return Array.isArray(e)&&!Array.isArray(s)?e:s}catch(s){return console.error("Error parsing JSON:",s),e}}async function ee(t){let e=t.getAttribute("src");if(!e)return console.error("Script src attribute is missing"),null;let s=e.split("/script.js")[0];if(!s)return console.error("Please provide a valid analytics host"),null;let n=t.getAttribute("data-site-id")||t.getAttribute("site-id");if(!n)return console.error("Please provide a valid site ID using the data-site-id attribute"),null;let i=t.getAttribute("data-namespace")||"rybbit",c=m(t.getAttribute("data-skip-patterns"),[]),l=m(t.getAttribute("data-mask-patterns"),[]),o=m(t.getAttribute("data-replay-mask-text-selectors"),[]),r=t.getAttribute("data-debounce")?Math.max(0,parseInt(t.getAttribute("data-debounce"))):500,a=t.getAttribute("data-replay-batch-size")?Math.max(1,parseInt(t.getAttribute("data-replay-batch-size"))):250,d=t.getAttribute("data-replay-batch-interval")?Math.max(1e3,parseInt(t.getAttribute("data-replay-batch-interval"))):5e3,S=t.getAttribute("data-replay-block-class")||void 0,v=t.getAttribute("data-replay-block-selector")||void 0,A=t.getAttribute("data-replay-ignore-class")||void 0,be=t.getAttribute("data-replay-ignore-selector")||void 0,ve=t.getAttribute("data-replay-mask-text-class")||void 0,j=t.getAttribute("data-replay-mask-all-inputs"),Re=j!==null?j!=="false":void 0,J=t.getAttribute("data-replay-mask-input-options"),ke=J?m(J,{password:!0,email:!0}):void 0,K=t.getAttribute("data-replay-collect-fonts"),Se=K!==null?K!=="false":void 0,q=t.getAttribute("data-replay-sampling"),we=q?m(q,{}):void 0,G=t.getAttribute("data-replay-slim-dom-options"),Te=G?m(G,{}):void 0,Q=t.getAttribute("data-replay-sample-rate"),Ee=Q?Math.min(100,Math.max(0,parseInt(Q,10))):void 0,u={namespace:i,analyticsHost:s,siteId:n,debounceDuration:r,sessionReplayBatchSize:a,sessionReplayBatchInterval:d,sessionReplayMaskTextSelectors:o,skipPatterns:c,maskPatterns:l,autoTrackPageview:!0,autoTrackSpa:!0,trackQuerystring:!0,trackOutbound:!0,enableWebVitals:!1,trackErrors:!1,enableSessionReplay:!1,sessionReplayBlockClass:S,sessionReplayBlockSelector:v,sessionReplayIgnoreClass:A,sessionReplayIgnoreSelector:be,sessionReplayMaskTextClass:ve,sessionReplayMaskAllInputs:Re,sessionReplayMaskInputOptions:ke,sessionReplayCollectFonts:Se,sessionReplaySampling:we,sessionReplaySlimDOMOptions:Te,sessionReplaySampleRate:Ee};try{let M=`${s}/site/tracking-config/${n}`,Y=await fetch(M,{method:"GET",credentials:"omit"});if(Y.ok){let f=await Y.json();return{...u,autoTrackPageview:f.trackInitialPageView??u.autoTrackPageview,autoTrackSpa:f.trackSpaNavigation??u.autoTrackSpa,trackQuerystring:f.trackUrlParams??u.trackQuerystring,trackOutbound:f.trackOutbound??u.trackOutbound,enableWebVitals:f.webVitals??u.enableWebVitals,trackErrors:f.trackErrors??u.trackErrors,enableSessionReplay:f.sessionReplay??u.enableSessionReplay}}else return console.warn("Failed to fetch tracking config from API, using defaults"),u}catch(M){return console.warn("Error fetching tracking config:",M),u}}var te="rybbit-replay-sampled";function Ae(t){if(t>=100)return!0;if(t<=0)return!1;try{let e=sessionStorage.getItem(te);if(e!==null)return e==="1";let s=Math.random()*100<t;return sessionStorage.setItem(te,s?"1":"0"),s}catch{return Math.random()*100<t}}var w=class{constructor(e,s,n){this.isRecording=!1;this.eventBuffer=[];this.config=e,this.userId=s,this.sendBatch=n}async initialize(){if(!this.config.enableSessionReplay)return;let e=this.config.sessionReplaySampleRate;e!==void 0&&!Ae(e)||(window.rrweb||await this.loadRrweb(),window.rrweb&&this.startRecording())}async loadRrweb(){return new Promise((e,s)=>{let n=document.createElement("script");n.src=`${this.config.analyticsHost}/replay.js`,n.async=!1,n.onload=()=>{e()},n.onerror=()=>s(new Error("Failed to load rrweb")),document.head.appendChild(n)})}startRecording(){if(!(this.isRecording||!window.rrweb||!this.config.enableSessionReplay))try{let e={mousemove:!1,mouseInteraction:{MouseUp:!1,MouseDown:!1,Click:!0,ContextMenu:!1,DblClick:!0,Focus:!0,Blur:!0,TouchStart:!1,TouchEnd:!1},scroll:500,input:"last",media:800},s={script:!1,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0},n={emit:i=>{this.addEvent({type:i.type,data:i.data,timestamp:i.timestamp||Date.now()})},recordCanvas:!1,checkoutEveryNms:6e4,checkoutEveryNth:500,blockClass:this.config.sessionReplayBlockClass??"rr-block",blockSelector:this.config.sessionReplayBlockSelector??null,ignoreClass:this.config.sessionReplayIgnoreClass??"rr-ignore",ignoreSelector:this.config.sessionReplayIgnoreSelector??null,maskTextClass:this.config.sessionReplayMaskTextClass??"rr-mask",maskAllInputs:this.config.sessionReplayMaskAllInputs??!0,maskInputOptions:this.config.sessionReplayMaskInputOptions??{password:!0,email:!0},collectFonts:this.config.sessionReplayCollectFonts??!0,sampling:this.config.sessionReplaySampling??e,slimDOMOptions:this.config.sessionReplaySlimDOMOptions??s};this.config.sessionReplayMaskTextSelectors&&this.config.sessionReplayMaskTextSelectors.length>0&&(n.maskTextSelector=this.config.sessionReplayMaskTextSelectors.join(", ")),this.stopRecordingFn=window.rrweb.record(n),this.isRecording=!0,this.setupBatchTimer()}catch{}}stopRecording(){this.isRecording&&(this.stopRecordingFn&&this.stopRecordingFn(),this.isRecording=!1,this.clearBatchTimer(),this.eventBuffer.length>0&&this.flushEvents())}isActive(){return this.isRecording}addEvent(e){this.eventBuffer.push(e),this.eventBuffer.length>=this.config.sessionReplayBatchSize&&this.flushEvents()}setupBatchTimer(){this.clearBatchTimer(),this.batchTimer=window.setInterval(()=>{this.eventBuffer.length>0&&this.flushEvents()},this.config.sessionReplayBatchInterval)}clearBatchTimer(){this.batchTimer&&(clearInterval(this.batchTimer),this.batchTimer=void 0)}async flushEvents(){if(this.eventBuffer.length===0)return;let e=[...this.eventBuffer];this.eventBuffer=[];let s={userId:this.userId,events:e,metadata:{pageUrl:window.location.href,viewportWidth:screen.width,viewportHeight:screen.height,language:navigator.language}};try{await this.sendBatch(s)}catch{this.eventBuffer.unshift(...e)}}updateUserId(e){this.userId=e}onPageChange(){this.isRecording&&this.flushEvents()}cleanup(){this.stopRecording()}};var T=class{constructor(e){this.customUserId=null;this.config=e,this.loadUserId(),e.enableSessionReplay&&this.initializeSessionReplay()}loadUserId(){try{let e=localStorage.getItem(`${this.config.namespace}-user-id`);e&&(this.customUserId=e)}catch{}}async initializeSessionReplay(){try{this.sessionReplayRecorder=new w(this.config,this.customUserId||"",e=>this.sendSessionReplayBatch(e)),await this.sessionReplayRecorder.initialize()}catch(e){console.error("Failed to initialize session replay:",e)}}async sendSessionReplayBatch(e){try{await fetch(`${this.config.analyticsHost}/session-replay/record/${this.config.siteId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors",keepalive:!1})}catch(s){throw console.error("Failed to send session replay batch:",s),s}}createBasePayload(){let e=new URL(window.location.href),s=e.pathname;if(e.hash&&e.hash.startsWith("#/")&&(s=e.hash.substring(1)),O(s,this.config.skipPatterns))return null;let n=O(s,this.config.maskPatterns);n&&(s=n);let i={site_id:this.config.siteId,hostname:e.hostname,pathname:s,querystring:this.config.trackQuerystring?e.search:"",screenWidth:screen.width,screenHeight:screen.height,language:navigator.language,page_title:document.title,referrer:document.referrer};return this.customUserId&&(i.user_id=this.customUserId),i}async sendTrackingData(e){try{await fetch(`${this.config.analyticsHost}/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),mode:"cors",keepalive:!0})}catch(s){console.error("Failed to send tracking data:",s)}}track(e,s="",n={}){if(e==="custom_event"&&(!s||typeof s!="string")){console.error("Event name is required and must be a string for custom events");return}let i=this.createBasePayload();if(!i)return;let c={...i,type:e,event_name:s,properties:e==="custom_event"||e==="outbound"||e==="error"?JSON.stringify(n):void 0};this.sendTrackingData(c)}trackPageview(){this.track("pageview")}trackEvent(e,s={}){this.track("custom_event",e,s)}trackOutbound(e,s="",n="_self"){this.track("outbound","",{url:e,text:s,target:n})}trackWebVitals(e){let s=this.createBasePayload();if(!s)return;let n={...s,type:"performance",event_name:"web-vitals",...e};this.sendTrackingData(n)}trackError(e,s={}){let n=window.location.origin,i=s.filename||"",c=e.stack||"";if(i)try{if(new URL(i).origin!==n)return}catch{}else if(c&&!c.includes(n))return;let l={message:e.message?.substring(0,500)||"Unknown error",stack:c.substring(0,2e3)||""};if(i&&(l.fileName=i),s.lineno){let o=typeof s.lineno=="string"?parseInt(s.lineno,10):s.lineno;o&&o!==0&&(l.lineNumber=o)}if(s.colno){let o=typeof s.colno=="string"?parseInt(s.colno,10):s.colno;o&&o!==0&&(l.columnNumber=o)}for(let o in s)!["lineno","colno"].includes(o)&&s[o]!==void 0&&(l[o]=s[o]);this.track("error",e.name||"Error",l)}identify(e,s){if(typeof e!="string"||e.trim()===""){console.error("User ID must be a non-empty string");return}this.customUserId=e.trim();try{localStorage.setItem(`${this.config.namespace}-user-id`,this.customUserId)}catch{console.warn("Could not persist user ID to localStorage")}this.sendIdentifyEvent(this.customUserId,s,!0),this.sessionReplayRecorder&&this.sessionReplayRecorder.updateUserId(this.customUserId)}setTraits(e){if(!e||typeof e!="object"){console.error("Traits must be an object");return}let s=this.customUserId;if(!s){console.warn("Cannot set traits without identifying user first. Call identify() first.");return}this.sendIdentifyEvent(s,e,!1)}async sendIdentifyEvent(e,s,n=!0){try{await fetch(`${this.config.analyticsHost}/identify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({site_id:this.config.siteId,user_id:e,traits:s,is_new_identify:n}),mode:"cors",keepalive:!0})}catch(i){console.error("Failed to send identify event:",i)}}clearUserId(){this.customUserId=null;try{localStorage.removeItem(`${this.config.namespace}-user-id`)}catch{}}getUserId(){return this.customUserId}startSessionReplay(){this.sessionReplayRecorder?this.sessionReplayRecorder.startRecording():console.warn("Session replay not initialized")}stopSessionReplay(){this.sessionReplayRecorder&&this.sessionReplayRecorder.stopRecording()}isSessionReplayActive(){return this.sessionReplayRecorder?.isActive()??!1}onPageChange(){this.sessionReplayRecorder&&this.sessionReplayRecorder.onPageChange()}cleanup(){this.sessionReplayRecorder&&this.sessionReplayRecorder.cleanup()}};var de=-1,b=t=>{addEventListener("pageshow",(e=>{e.persisted&&(de=e.timeStamp,t(e))}),!0)},p=(t,e,s,n)=>{let i,c;return l=>{e.value>=0&&(l||n)&&(c=e.value-(i??0),(c||i===void 0)&&(i=e.value,e.delta=c,e.rating=((o,r)=>o>r[1]?"poor":o>r[0]?"needs-improvement":"good")(e.value,s),t(e)))}},W=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},H=()=>{let t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},R=()=>H()?.activationStart??0,h=(t,e=-1)=>{let s=H(),n="navigate";return de>=0?n="back-forward-cache":s&&(document.prerendering||R()>0?n="prerender":document.wasDiscarded?n="restore":s.type&&(n=s.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},B=new WeakMap;function V(t,e){return B.get(t)||B.set(t,new e),B.get(t)}var x=class{constructor(){g(this,"t");g(this,"i",0);g(this,"o",[])}h(e){if(e.hadRecentInput)return;let s=this.o[0],n=this.o.at(-1);this.i&&s&&n&&e.startTime-n.startTime<1e3&&e.startTime-s.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}},k=(t,e,s={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){let n=new PerformanceObserver((i=>{Promise.resolve().then((()=>{e(i.getEntries())}))}));return n.observe({type:t,buffered:!0,...s}),n}}catch{}},$=t=>{let e=!1;return()=>{e||(t(),e=!0)}},y=-1,ue=new Set,se=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,_=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(let e of ue)e();isFinite(y)||(y=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",_,!0))}},P=()=>{if(y<0){let t=R();y=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((s=>s.name==="hidden"&&s.startTime>t))[0]?.startTime)??se(),addEventListener("visibilitychange",_,!0),addEventListener("prerenderingchange",_,!0),b((()=>{setTimeout((()=>{y=se()}))}))}return{get firstHiddenTime(){return y},onHidden(t){ue.add(t)}}},C=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},ne=[1800,3e3],z=(t,e={})=>{C((()=>{let s=P(),n,i=h("FCP"),c=k("paint",(l=>{for(let o of l)o.name==="first-contentful-paint"&&(c.disconnect(),o.startTime<s.firstHiddenTime&&(i.value=Math.max(o.startTime-R(),0),i.entries.push(o),n(!0)))}));c&&(n=p(t,i,ne,e.reportAllChanges),b((l=>{i=h("FCP"),n=p(t,i,ne,e.reportAllChanges),W((()=>{i.value=performance.now()-l.timeStamp,n(!0)}))})))}))},ie=[.1,.25],pe=(t,e={})=>{let s=P();z($((()=>{let n,i=h("CLS",0),c=V(e,x),l=r=>{for(let a of r)c.h(a);c.i>i.value&&(i.value=c.i,i.entries=c.o,n())},o=k("layout-shift",l);o&&(n=p(t,i,ie,e.reportAllChanges),s.onHidden((()=>{l(o.takeRecords()),n(!0)})),b((()=>{c.i=0,i=h("CLS",0),n=p(t,i,ie,e.reportAllChanges),W((()=>n()))})),setTimeout(n))})))},he=0,L=1/0,E=0,Me=t=>{for(let e of t)e.interactionId&&(L=Math.min(L,e.interactionId),E=Math.max(E,e.interactionId),he=E?(E-L)/7+1:0)},D,re=()=>D?he:performance.interactionCount??0,Oe=()=>{"interactionCount"in performance||D||(D=k("event",Me,{type:"event",buffered:!0,durationThreshold:0}))},ae=0,U=class{constructor(){g(this,"u",[]);g(this,"l",new Map);g(this,"m");g(this,"p")}v(){ae=re(),this.u.length=0,this.l.clear()}L(){let e=Math.min(this.u.length-1,Math.floor((re()-ae)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&e.entryType!=="first-input")return;let s=this.u.at(-1),n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>s.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((i,c)=>c.P-i.P)),this.u.length>10){let i=this.u.splice(10);for(let c of i)this.l.delete(c.id)}this.p?.(n)}}},ge=t=>{let e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=$(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},oe=[200,500],fe=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;let s=P();C((()=>{Oe();let n,i=h("INP"),c=V(e,U),l=r=>{ge((()=>{for(let d of r)c.h(d);let a=c.L();a&&a.P!==i.value&&(i.value=a.P,i.entries=a.entries,n())}))},o=k("event",l,{durationThreshold:e.durationThreshold??40});n=p(t,i,oe,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),s.onHidden((()=>{l(o.takeRecords()),n(!0)})),b((()=>{c.v(),i=h("INP"),n=p(t,i,oe,e.reportAllChanges)})))}))},F=class{constructor(){g(this,"m")}h(e){this.m?.(e)}},ce=[2500,4e3],me=(t,e={})=>{C((()=>{let s=P(),n,i=h("LCP"),c=V(e,F),l=r=>{e.reportAllChanges||(r=r.slice(-1));for(let a of r)c.h(a),a.startTime<s.firstHiddenTime&&(i.value=Math.max(a.startTime-R(),0),i.entries=[a],n())},o=k("largest-contentful-paint",l);if(o){n=p(t,i,ce,e.reportAllChanges);let r=$((()=>{l(o.takeRecords()),o.disconnect(),n(!0)})),a=d=>{d.isTrusted&&(ge(r),removeEventListener(d.type,a,{capture:!0}))};for(let d of["keydown","click","visibilitychange"])addEventListener(d,a,{capture:!0});b((d=>{i=h("LCP"),n=p(t,i,ce,e.reportAllChanges),W((()=>{i.value=performance.now()-d.timeStamp,n(!0)}))}))}}))},le=[800,1800],N=t=>{document.prerendering?C((()=>N(t))):document.readyState!=="complete"?addEventListener("load",(()=>N(t)),!0):setTimeout(t)},ye=(t,e={})=>{let s=h("TTFB"),n=p(t,s,le,e.reportAllChanges);N((()=>{let i=H();i&&(s.value=Math.max(i.responseStart-R(),0),s.entries=[i],n(!0),b((()=>{s=h("TTFB",0),n=p(t,s,le,e.reportAllChanges),n(!0)})))}))};var I=class{constructor(e){this.data={lcp:null,cls:null,inp:null,fcp:null,ttfb:null};this.sent=!1;this.timeout=null;this.onReadyCallback=null;this.onReadyCallback=e}initialize(){try{me(this.collectMetric.bind(this)),pe(this.collectMetric.bind(this)),fe(this.collectMetric.bind(this)),z(this.collectMetric.bind(this)),ye(this.collectMetric.bind(this)),this.timeout=setTimeout(()=>{this.sent||this.sendData()},2e4),window.addEventListener("beforeunload",()=>{this.sent||this.sendData()})}catch(e){console.warn("Error initializing web vitals tracking:",e)}}collectMetric(e){if(this.sent)return;let s=e.name.toLowerCase();this.data[s]=e.value,Object.values(this.data).every(i=>i!==null)&&this.sendData()}sendData(){this.sent||(this.sent=!0,this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.onReadyCallback&&this.onReadyCallback(this.data))}getData(){return{...this.data}}};(async function(){let t=document.currentScript;if(!t){console.error("Could not find current script tag");return}let e=t.getAttribute("data-namespace")||"rybbit",s=`disable-${e}`;if(window.__RYBBIT_OPTOUT__||localStorage.getItem(s)!==null){window[e]={pageview:()=>{},event:()=>{},error:()=>{},trackOutbound:()=>{},identify:()=>{},setTraits:()=>{},clearUserId:()=>{},getUserId:()=>null,startSessionReplay:()=>{},stopSessionReplay:()=>{},isSessionReplayActive:()=>!1};return}let n=await ee(t);if(!n)return;let i=new T(n);n.enableWebVitals&&new I(a=>{i.trackWebVitals(a)}).initialize(),n.trackErrors&&(window.addEventListener("error",r=>{i.trackError(r.error||new Error(r.message),{filename:r.filename,lineno:r.lineno,colno:r.colno})}),window.addEventListener("unhandledrejection",r=>{let a=r.reason instanceof Error?r.reason:new Error(String(r.reason));i.trackError(a,{type:"unhandledrejection"})}));let c=()=>i.trackPageview(),l=n.debounceDuration>0?X(c,n.debounceDuration):c;function o(){if(document.addEventListener("click",function(r){let a=r.target;for(;a&&a!==document.documentElement;){if(a.hasAttribute("data-rybbit-event")){let d=a.getAttribute("data-rybbit-event");if(d){let S={};for(let v of a.attributes)if(v.name.startsWith("data-rybbit-prop-")){let A=v.name.replace("data-rybbit-prop-","");S[A]=v.value}i.trackEvent(d,S)}break}a=a.parentElement}if(n.trackOutbound){let d=r.target.closest("a");d?.href&&Z(d.href)&&i.trackOutbound(d.href,d.innerText||d.textContent||"",d.target||"_self")}}),n.autoTrackSpa){let r=history.pushState,a=history.replaceState;history.pushState=function(...d){r.apply(this,d),l(),i.onPageChange()},history.replaceState=function(...d){a.apply(this,d),l(),i.onPageChange()},window.addEventListener("popstate",()=>{l(),i.onPageChange()}),window.addEventListener("hashchange",()=>{l(),i.onPageChange()})}}window[n.namespace]={pageview:()=>i.trackPageview(),event:(r,a={})=>i.trackEvent(r,a),error:(r,a={})=>i.trackError(r,a),trackOutbound:(r,a="",d="_self")=>i.trackOutbound(r,a,d),identify:(r,a)=>i.identify(r,a),setTraits:r=>i.setTraits(r),clearUserId:()=>i.clearUserId(),getUserId:()=>i.getUserId(),startSessionReplay:()=>i.startSessionReplay(),stopSessionReplay:()=>i.stopSessionReplay(),isSessionReplayActive:()=>i.isSessionReplayActive()},o(),window.addEventListener("beforeunload",()=>{i.cleanup()}),n.autoTrackPageview&&i.trackPageview()})();})();
